<!DOCTYPE html><html lang="zh"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://babybluue.github.io/posts/3ff28d3c"><link rel="manifest" href="/manifest.webmanifest"><link rel="apple-touch-icon" sizes="192x192" href="/images/appleicon"><link rel="apple-touch-startup-image" media="(device-width: 750px) and (device-height:1334px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/images/launch"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="apple-mobile-web-app-title" content="babyblue"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1f1f1f"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"><meta name="color-scheme" content="light dark"><link rel="icon" href="/images/favicon.ico"><meta name="description" content="insertBefore() "><meta name="keywords" content="blog,博客,程序员,记录,学习,网站 "><title>JavaScript操作Dom元素</title><link rel="stylesheet" href="/style/style.css"><link rel="stylesheet" href="/style/highlight.css" media="none" onload='this.media="all"'><link rel="stylesheet" href="/style/fancybox.css" media="none" onload='this.media="all"'><script type="text/javascript">var currentPath=window.location.pathname,targetUrl="https://didmax.pages.dev";window.location.href=targetUrl+currentPath</script><script>localStorage.theme&&document.documentElement.setAttribute("data-theme",localStorage.theme)</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-TMJ0G5Z2NR"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-TMJ0G5Z2NR")</script><script>document.onreadystatechange=()=>{const t=document.querySelector(".loading-bar");700<document.body.clientWidth&&(t.style.background="#91C4E2","interactive"==document.readyState&&(t.style.transition="width 1.4s ease-in-out",t.style.width="67%"),"complete"==document.readyState&&(t.style.transition="width 0.3s ease-in-out",t.style.width="100%",setTimeout(()=>{t.setAttribute("style","transition:width 0s;width:0;background:''")},500)))}</script><meta name="generator" content="Hexo 5.4.2"></head><body class="scroll-bar"><div class="loading-bar"></div><div class="progress-bar"></div><main><header><nav><ul class="nav-button"><li></li><li></li><li></li></ul><div class="nav-bar"><ul><span class="close-button">×</span><div class="nav-avatar"><a href="/" aria-label="index"><img src="/images/avatar.png" class="avatar" alt="avatar"></a></div><li><a href="/archives/">Archive</a></li><li><a href="/notes/">Notes</a></li><li><a href="/articles/">Articles</a></li><li><a href="mailto:kerrismith19786@gmail.com" rel="external nofollow noreferrer">Contact</a></li></ul></div></nav></header><div class="post-main"><article><div class="post-card"><div class="header-title">JavaScript操作Dom元素</div><div class="header-info"><span>2021.11.12 Fri</span></div><div class="card-content"><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs HTML"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> box1 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;.box:first-child&quot;</span>);</span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> box2 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;.box:nth-child(2)&quot;</span>);</span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> box3 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;.box:last-child&quot;</span>);</span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> subDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);</span><br><span class="language-javascript">  subDiv.<span class="hljs-title function_">setAttribute</span>(</span><br><span class="language-javascript">        <span class="hljs-string">&quot;style&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-string">&quot;background:lightblue;width:200px;height:200px&quot;</span></span><br><span class="language-javascript">      );</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><br></code></pre></td></tr></table></figure><span id="more"></span><ul><li><p>节点 Node<br>Node 是一个接口，各种类型的 DOM API 对象会从这个接口继承。 包含 Document, Element, Attr, Text, Comment, DocumentFragment, DocumentType 等</p><p>Node.nodeName<br>返回一个包含该节点名字的 DOMString。节点的名字的结构和节点类型不同。比如 HTMLElement 的名字跟它所关联的标签对应，就比如 HTMLAudioElement 的就是 'audio' ，Text 节点对应的是 '#text' 还有 Document 节点对应的是 '#document'。</p><p>Node.nodeType<br>返回一个与该节点类型对应的无符号短整型的值,例如 ElementNode=&gt;1 TextNode=&gt;3 CommentNode=&gt;8 DocumentNode=&gt;9</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">const</span> container=<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.container&#x27;</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(container.<span class="hljs-property">nodeName</span>) <span class="hljs-comment">// &#x27;DIV&#x27;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(container.<span class="hljs-property">nodeType</span>) <span class="hljs-comment">// 1</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(container.<span class="hljs-property">childNodes</span>) <span class="hljs-comment">// [text, div.box, text, div.box, text, div.box, text]</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(container.<span class="hljs-property">childNodes</span>[<span class="hljs-number">0</span>].<span class="hljs-property">textContent</span>) <span class="hljs-comment">// &#x27;\n      &#x27; 换行</span><br><br></code></pre></td></tr></table></figure></li><li><p>insertBefore()</p><blockquote><p>Node.insertBefore() 方法在参考节点之前插入一个拥有指定父节点的子节点。如果给定的子节点是对文档中现有节点的引用，insertBefore() 会将其从当前位置移动到新位置(在将节点附加到其他节点之前，不需要从其父节点删除该节点。</p></blockquote><blockquote><p>这意味着一个节点不能同时位于文档的两个点中。因此，如果节点已经有父节点，则首先删除该节点，然后将其插入到新位置。在将节点追加到新父节点之前，可以使用 Node.cloneNode() 复制节点。注意，使用 cloneNode() 创建的节点副本不会自动与原始节点保持同步。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-comment">//在 box2 前插入新元素</span><br>box2.<span class="hljs-property">parentNode</span>.<span class="hljs-title function_">insertBefore</span>(subDiv, box2);<br><span class="hljs-comment">//在 box1 前插入 box3，box3 从原来的位置移动到新位置</span><br>box1.<span class="hljs-property">parentNode</span>.<span class="hljs-title function_">insertBefore</span>(box3, box1);<br></code></pre></td></tr></table></figure></li><li><p>after()</p><blockquote><p>Element.after() 方法会在其父节点的子节点列表中插入一些 Node 或 DOMString 对象。插入位置为该节点之后。DOMString 对象会被以 Text 的形式插入。如果给定的子节点是对文档中现有节点的引用,同样会将其从当前位置移动到新位置。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript">box2.<span class="hljs-title function_">after</span>(subDiv);<br></code></pre></td></tr></table></figure></li><li><p>remove()</p><blockquote><p>Element.remove() 把对象从它所属的 DOM 树中删除。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript">box2.<span class="hljs-title function_">remove</span>()<br></code></pre></td></tr></table></figure></li><li><p>replaceChild()</p><blockquote><p>Node.replaceChild() 方法用指定的节点替换当前节点的一个子节点，并返回被替换掉的节点。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-comment">//subDiv 替换 box2</span><br>box2.<span class="hljs-property">parentNode</span>.<span class="hljs-title function_">replaceChild</span>(subDiv, box2);<br><span class="hljs-comment">//box3替换 box1，box3 从原来的位置移动到 box1</span><br>box1.<span class="hljs-property">parentNode</span>.<span class="hljs-title function_">replaceChild</span>(box3, box1);<br></code></pre></td></tr></table></figure></li><li><p>append()</p><blockquote><p>Element.append 方法在 Element 的最后一个子节点之后插入一组 Node 对象或 DOMString 对象。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-comment">//按照顺序插入到container末尾，box2 位置移动</span><br>container.<span class="hljs-title function_">append</span>(subDiv, box2);<br></code></pre></td></tr></table></figure></li><li><p>appendChild()</p><blockquote><p>Node.appendChild() 方法将一个节点附加到指定父节点的子节点列表的末尾处。如果将被插入的节点已经存在于当前文档的文档树中，那么 appendChild() 只会将它从原先的位置移动到新的位置（不需要事先移除要移动的节点）。</p></blockquote><blockquote><p>这意味着，一个节点不可能同时出现在文档的不同位置。所以，如果某个节点已经拥有父节点，在被传递给此方法后，它首先会被移除，再被插入到新的位置。若要保留已在文档中的节点，可以先使用 Node.cloneNode() 方法来为它创建一个副本，再将副本附加到目标父节点下。请注意，用 cloneNode 制作的副本不会自动保持同步。</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript">container.<span class="hljs-title function_">appendChild</span>(subDiv);<br>container.<span class="hljs-title function_">appendChild</span>(box1);<br></code></pre></td></tr></table></figure></li><li><p>append() 与 appendChild() 差异：</p><blockquote><p>Element.append() 允许追加 DOMString 对象，而 Node.appendChild() 只接受 Node 对象。<br>Element.append() 没有返回值，而 Node.appendChild() 返回追加的 Node 对象。<br>Element.append() 可以追加多个节点和字符串，而 Node.appendChild() 只能追加一个节点。</p></blockquote></li><li><p>documentFragment</p><blockquote><p>DocumentFragment，文档片段接口，一个没有父对象的最小文档对象。它被作为一个轻量版的 Document 使用，就像标准的 document 一样，存储由节点（nodes）组成的文档结构。与 document 相比，最大的区别是 DocumentFragment 不是真实 DOM 树的一部分，它的变化不会触发 DOM 树的重新渲染，且不会导致性能等问题。</p></blockquote><blockquote><p>最常用的方法是使用文档片段作为参数（例如，任何 Node 接口类似 Node.appendChild 和 Node.insertBefore 的方法），这种情况下被添加（append）或被插入（inserted）的是片段的所有子节点, 而非片段本身。因为所有的节点会被一次插入到文档中，而这个操作仅发生一个重渲染的操作，而不是每个节点分别被插入到文档中，因为后者会发生多次重渲染的操作。</p></blockquote></li><li><p>cloneNode()<br><code>const dupNode = node.cloneNode(deep);</code><br>deep 是否采用深度克隆,如果为 true,则该节点所有后代节点也都会被克隆,如果为 false,则只克隆该节点本身，默认值为 false</p><blockquote><p>克隆一个元素节点会拷贝它所有的属性以及属性值,当然也就包括了属性上绑定的事件(比如 onclick=&quot;alert(1)&quot;),但不会拷贝那些使用 addEventListener()方法或者 node.onclick = fn 这种用 JavaScript 动态绑定的事件.</p></blockquote></li></ul><h4 id="示例"><a class="markdownIt-Anchor" href="#示例"></a> 示例</h4><ol><li><p>替换子元素的父元素(保留子元素)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">const</span> container=<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.container&#x27;</span>)<br><span class="hljs-keyword">const</span> newFragment=<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createDocumentFragment</span>()<br><span class="hljs-keyword">const</span> newDiv=<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;div&#x27;</span>)<br><br><span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;container.<span class="hljs-property">children</span>.<span class="hljs-property">length</span>;i++)&#123;<br><span class="hljs-comment">// 1. newFragment.append(container.children[i].cloneNode())</span><br><span class="hljs-comment">// 2. newDiv.append(container.children[i].cloneNode())</span><br>&#125;<br><br><span class="hljs-comment">// 1. container.parentNode.replaceChild(newFragment,container)</span><br>  &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;<span class="hljs-number">1</span>&lt;/div&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="hljs-comment">// 2. container.parentNode.replaceChild(newDiv,container)</span><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>如上，通过 createDocumentFragment()创建的 newFragment 片段通过 replaceChild()添加到文档之后，添加的是片段的所有子节点，而非片段本身。而且如此即是将三个子节点一起插入到文档。</p><p>另外在 for 循环通过 append 插入元素<code>newDiv.append(container.children[i].cloneNode())</code>，如果不克隆(cloneNode())该子元素的话，实际上插入的子元素只有 box1 和 box3。<code>newDiv.append(container.children[i])</code>在插入第一个子元素时，导致 box1 在原来的节点发生了移动，因此原来的 container 节点现在只剩下 box2 和 box3 两个元素。</p></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript"><span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;.container&quot;</span>);<br><span class="hljs-keyword">const</span> allBox = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">&quot;.box&quot;</span>);<br><span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; allBox.<span class="hljs-property">length</span>; i++) &#123;<br>  allBox[i].<span class="hljs-property">textContent</span> = i;<br>  <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>);<br>  div.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&quot;style&quot;</span>, <span class="hljs-string">&quot;border:1px solid green;width:100px;height:100px&quot;</span>);<br>  <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span>) &#123;<br>    allBox[i].<span class="hljs-property">parentNode</span>.<span class="hljs-title function_">insertBefore</span>(allBox[i + <span class="hljs-number">1</span>], allBox[i]);<br>  &#125;<br>  <span class="hljs-keyword">if</span> (i == <span class="hljs-number">1</span>) &#123;<br>    <span class="hljs-comment">// allBox[i].remove();</span><br>  &#125;<br>  <span class="hljs-keyword">if</span> (i == <span class="hljs-number">2</span>) &#123;<br>    allBox[i].<span class="hljs-title function_">after</span>(allBox[i - <span class="hljs-number">1</span>].<span class="hljs-title function_">cloneNode</span>(<span class="hljs-literal">true</span>));<br>    <span class="hljs-comment">// allBox[i].parentNode.replaceChild(div, allBox[i]);</span><br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> table = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;table&quot;</span>);<br><span class="hljs-keyword">const</span> trs = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">&quot;table tr&quot;</span>);<br>trs.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">tr, indextr</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> tds = tr.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">&quot;td&quot;</span>);<br>  <span class="hljs-keyword">const</span> divChild = tr.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">&quot;td:nth-child(2) div&quot;</span>);<br><br>  <span class="hljs-keyword">if</span> (divChild.<span class="hljs-property">length</span> &gt; <span class="hljs-number">1</span>) &#123;<br>    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; divChild.<span class="hljs-property">length</span>; i++) &#123;<br>      <span class="hljs-keyword">const</span> newTr = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;tr&quot;</span>);<br>      tds.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">td, indextd</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">const</span> child = td.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">&quot;div&quot;</span>);<br>        <span class="hljs-keyword">if</span> (child.<span class="hljs-property">length</span> !== <span class="hljs-number">0</span>) &#123;<br>          <span class="hljs-keyword">const</span> newTd = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;td&quot;</span>);<br>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child[<span class="hljs-number">0</span>].<span class="hljs-property">innerHTML</span>);<br>          newTd.<span class="hljs-title function_">append</span>(child[i].<span class="hljs-title function_">cloneNode</span>(<span class="hljs-literal">true</span>));<br>          newTr.<span class="hljs-title function_">append</span>(newTd);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span>) &#123;<br>          <span class="hljs-keyword">const</span> newTd = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;td&quot;</span>);<br>          td.<span class="hljs-property">parentNode</span>.<span class="hljs-title function_">replaceChild</span>(newTd, td);<br>          newTd.<span class="hljs-title function_">append</span>(td.<span class="hljs-property">textContent</span>);<br>          newTd.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&quot;rowspan&quot;</span>, divChild.<span class="hljs-property">length</span>);<br>          newTr.<span class="hljs-title function_">append</span>(newTd);<br>        &#125;<br>        tr.<span class="hljs-property">parentNode</span>.<span class="hljs-title function_">insertBefore</span>(newTr, tr);<br>      &#125;);<br>    &#125;<br>    tr.<span class="hljs-title function_">remove</span>();<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><hr><p>参考链接:<br><a target="_blank" rel="noopener external nofollow noreferrer" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Node">Node 节点</a></p></div><div class="post-tags"><a href="/tags/JavaScript/">JavaScript</a></div></div></article><div class="post-pagination"><div class="prev-page"><a href="/posts/1562b2a5" title="Hexo插件">Hexo插件</a></div><div class="next-page"><a href="/posts/9765cad4" title="JavaScript 备忘录 ">JavaScript 备忘录</a></div></div></div><svg t="1673947892053" class="top" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9313" width="45" height="45"><path d="M535.12 442.432v210.016a16 16 0 0 1-16 16h-16.16a16 16 0 0 1-16-16V440.208l-32.88 32.864a16 16 0 0 1-11.312 4.688h-28.304a14.464 14.464 0 0 1-10.24-24.688l97.824-97.808a11.136 11.136 0 0 1 15.744 0l97.808 97.808a14.464 14.464 0 0 1-10.24 24.688h-28.288a16 16 0 0 1-11.312-4.688l-30.64-30.64zM512 800c159.056 0 288-128.944 288-288s-128.944-288-288-288-288 128.944-288 288 128.944 288 288 288z m0 48c-185.568 0-336-150.432-336-336s150.432-336 336-336 336 150.432 336 336-150.432 336-336 336z" p-id="9314"></path></svg><div class="tip disappear"><p>检测到页面内容有更新，是否刷新页面 <span class="positive-btn">是</span><span class="negative-btn">否</span></p></div></main><script src="/scripts/script.js" async></script><script async type="module">import{Fancybox}from"/scripts/fancybox.esm.js";Fancybox.bind('[data-fancybox="gallery"]',{Toolbar:{display:["fullscreen","download","close"]}})</script></body></html>