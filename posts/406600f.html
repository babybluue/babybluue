<!DOCTYPE html><html lang="zh"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="canonical" href="https://babybluue.github.io/posts/406600f"><link rel="manifest" href="/manifest.webmanifest"><link rel="apple-touch-icon" sizes="192x192" href="/images/appleicon"><link rel="apple-touch-startup-image" media="(device-width: 750px) and (device-height:1334px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/images/launch"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="apple-mobile-web-app-title" content="babyblue"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1f1f1f"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"><meta name="color-scheme" content="light dark"><link rel="icon" href="/images/favicon.ico"><meta name="description" content="女朋友的弟弟向她请教 Python 课程作业，一是利用 Requests 和 BeautifulSoup 爬取网页数据并导出，二是给出学生成绩表利用 Pandas 进行数据分析，感觉这两次作业的目的性很强，很好地体现了 Python 的作用，便在此梳理总结一下，方便日后快速回顾和学习。 "><meta name="keywords" content="blog,博客,程序员,记录,学习,网站 "><title>Python课程作业-简单爬虫和数据分析</title><link rel="stylesheet" href="/style/style.css"><link rel="stylesheet" href="/style/highlight.css" media="none" onload='this.media="all"'><link rel="stylesheet" href="/style/fancybox.css" media="none" onload='this.media="all"'><script type="text/javascript">var currentPath=window.location.pathname,targetUrl="https://didmax.pages.dev";window.location.href=targetUrl+currentPath</script><script>localStorage.theme&&document.documentElement.setAttribute("data-theme",localStorage.theme)</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-TMJ0G5Z2NR"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-TMJ0G5Z2NR")</script><script>document.onreadystatechange=()=>{const t=document.querySelector(".loading-bar");700<document.body.clientWidth&&(t.style.background="#91C4E2","interactive"==document.readyState&&(t.style.transition="width 1.4s ease-in-out",t.style.width="67%"),"complete"==document.readyState&&(t.style.transition="width 0.3s ease-in-out",t.style.width="100%",setTimeout(()=>{t.setAttribute("style","transition:width 0s;width:0;background:''")},500)))}</script><meta name="generator" content="Hexo 5.4.2"></head><body class="scroll-bar"><div class="loading-bar"></div><div class="progress-bar"></div><main><header><nav><ul class="nav-button"><li></li><li></li><li></li></ul><div class="nav-bar"><ul><span class="close-button">×</span><div class="nav-avatar"><a href="/" aria-label="index"><img src="/images/avatar.png" class="avatar" alt="avatar"></a></div><li><a href="/archives/">Archive</a></li><li><a href="/notes/">Notes</a></li><li><a href="/articles/">Articles</a></li><li><a href="mailto:kerrismith19786@gmail.com" rel="external nofollow noreferrer">Contact</a></li></ul></div></nav></header><div class="post-main"><article><div class="post-card"><div class="header-title">Python课程作业-简单爬虫和数据分析</div><div class="header-info"><span>2022.04.18 Mon</span></div><div class="card-content"><p>女朋友的弟弟向她请教 Python 课程作业，一是利用 Requests 和 BeautifulSoup 爬取网页数据并导出，二是给出学生成绩表利用 Pandas 进行数据分析，感觉这两次作业的目的性很强，很好地体现了 Python 的作用，便在此梳理总结一下，方便日后快速回顾和学习。</p><span id="more"></span><h4 id="创建虚拟环境"><a class="markdownIt-Anchor" href="#创建虚拟环境"></a> 创建虚拟环境</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">python -m venv virtual-env<br></code></pre></td></tr></table></figure><p>命令会创建一个 virtual-enviroment 的文件夹，里面包含 python 编译器、标准库和其他一些文件,其中在 Scripts 文件夹下包含激活虚拟环境的执行文件。</p><h4 id="安装第三方库"><a class="markdownIt-Anchor" href="#安装第三方库"></a> 安装第三方库</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install requests <span class="hljs-comment"># 安装requests库，用于爬取网页</span><br><br>pip install beautifulsoup4 <span class="hljs-comment"># 安装beautifulsoup4库，用于解析网页</span><br><br>pip install pandas <span class="hljs-comment"># 安装pandas库，用于数据分析</span><br></code></pre></td></tr></table></figure><h4 id="爬取豆瓣电影-op250"><a class="markdownIt-Anchor" href="#爬取豆瓣电影-op250"></a> 爬取豆瓣电影 op250</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> csv<br><span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup<br><br>headers = &#123;<br>    <span class="hljs-string">&quot;User-Agent&quot;</span>: <span class="hljs-string">&quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.141 Safari/537.36&quot;</span><br>&#125;<br>top_250 = []<br>csv_header = [<span class="hljs-string">&quot;排名&quot;</span>, <span class="hljs-string">&quot;电影名称&quot;</span>, <span class="hljs-string">&quot;评分&quot;</span>]<br><span class="hljs-comment"># 获取网页源码</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">getHTMLText</span>():<br>    page = requests.get(URL, headers=headers)<br>    soup = BeautifulSoup(page.content, <span class="hljs-string">&quot;html.parser&quot;</span>)<br>    movie_list = soup.find_all(<span class="hljs-string">&quot;div&quot;</span>, class_=<span class="hljs-string">&quot;item&quot;</span>)<br>    <span class="hljs-keyword">for</span> movie <span class="hljs-keyword">in</span> movie_list:<br>        movie_rank = movie.find(<span class="hljs-string">&quot;em&quot;</span>).string<br>        movie_name = movie.find(<span class="hljs-string">&quot;span&quot;</span>, class_=<span class="hljs-string">&quot;title&quot;</span>).string<br>        movie_score = movie.find(<span class="hljs-string">&quot;span&quot;</span>, class_=<span class="hljs-string">&quot;rating_num&quot;</span>).string<br>        fillUnivList(movie_rank, movie_name, movie_score)<br><br><span class="hljs-comment"># 填充数据</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fillUnivList</span>(<span class="hljs-params">rank, name, score</span>):<br>    top_250.append(&#123;<span class="hljs-string">&quot;排名&quot;</span>: rank, <span class="hljs-string">&quot;电影名称&quot;</span>: name, <span class="hljs-string">&quot;评分&quot;</span>: score&#125;)<br><br><span class="hljs-comment"># 向csv写入数据</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">writeUListfile</span>():<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;top_250.csv&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>, newline=<span class="hljs-string">&quot;&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        f_csv = csv.DictWriter(f, csv_header)<br>        f_csv.writeheader()<br>        f_csv.writerows(top_250)<br><br><span class="hljs-comment"># 从csv读取数据</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">printUniverList</span>():<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;top_250.csv&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>, newline=<span class="hljs-string">&quot;&quot;</span>) <span class="hljs-keyword">as</span> fin:<br>        reader = csv.reader(fin)<br>        <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> reader:<br>            <span class="hljs-built_in">print</span>(row)<br><br><span class="hljs-comment"># 循环读取豆瓣网页数据</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-number">226</span>, <span class="hljs-number">25</span>):<br>    URL = <span class="hljs-string">f&quot;https://movie.douban.com/top250?start=<span class="hljs-subst">&#123;i&#125;</span>&amp;filter=&quot;</span><br>    getHTMLText()<br>    writeUListfile()<br><br>printUniverList()<br></code></pre></td></tr></table></figure><h4 id="学生成绩分析"><a class="markdownIt-Anchor" href="#学生成绩分析"></a> 学生成绩分析</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><br>data = pd.DataFrame(<br>    &#123;<br>        <span class="hljs-string">&quot;学号&quot;</span>: [<span class="hljs-string">&quot;19000&quot;</span>,<span class="hljs-string">&quot;19001&quot;</span>,<span class="hljs-string">&quot;19002&quot;</span>,<span class="hljs-string">&quot;19003&quot;</span>,<span class="hljs-string">&quot;19004&quot;</span>, <span class="hljs-string">&quot;19005&quot;</span>,<span class="hljs-string">&quot;19006&quot;</span>,<span class="hljs-string">&quot;19007&quot;</span>,<span class="hljs-string">&quot;19008&quot;</span>,<span class="hljs-string">&quot;19009&quot;</span>],<br>        <span class="hljs-string">&quot;姓名&quot;</span>: [<span class="hljs-string">&quot;Johnny&quot;</span>,<span class="hljs-string">&quot;Mary&quot;</span>, <span class="hljs-string">&quot;Sara&quot;</span>, <span class="hljs-string">&quot;Micky&quot;</span>,<span class="hljs-string">&quot;Jerry&quot;</span>,<span class="hljs-string">&quot;Sunny&quot;</span>,<span class="hljs-string">&quot;Sherry&quot;</span>,<span class="hljs-string">&quot;Alice&quot;</span>,<span class="hljs-string">&quot;Nala&quot;</span>,<span class="hljs-string">&quot;Anna&quot;</span>],<br>        <span class="hljs-string">&quot;程序设计&quot;</span>: [<span class="hljs-number">88</span>, <span class="hljs-number">75</span>, <span class="hljs-number">95</span>, <span class="hljs-number">85</span>, <span class="hljs-number">58</span>, <span class="hljs-number">78</span>, <span class="hljs-number">56</span>, <span class="hljs-number">68</span>, <span class="hljs-number">73</span>, <span class="hljs-number">63</span>],<br>        <span class="hljs-string">&quot;体育&quot;</span>: [<span class="hljs-number">91</span>, <span class="hljs-number">80</span>, <span class="hljs-number">90</span>, <span class="hljs-number">80</span>, <span class="hljs-number">76</span>, <span class="hljs-number">74</span>, <span class="hljs-number">70</span>, <span class="hljs-number">96</span>, <span class="hljs-number">86</span>, <span class="hljs-number">69</span>],<br>        <span class="hljs-string">&quot;英语&quot;</span>: [<span class="hljs-number">76</span>, <span class="hljs-number">93</span>, <span class="hljs-number">89</span>, <span class="hljs-number">90</span>, <span class="hljs-number">86</span>, <span class="hljs-number">57</span>, <span class="hljs-number">76</span>, <span class="hljs-number">67</span>, <span class="hljs-number">64</span>, <span class="hljs-number">85</span>],<br>        <span class="hljs-string">&quot;高数&quot;</span>: [<span class="hljs-number">67</span>, <span class="hljs-number">85</span>, <span class="hljs-number">91</span>, <span class="hljs-number">78</span>, <span class="hljs-number">89</span>, <span class="hljs-number">64</span>, <span class="hljs-number">67</span>, <span class="hljs-number">70</span>, <span class="hljs-number">91</span>, <span class="hljs-number">93</span>],<br>    &#125;<br>)<br><br><span class="hljs-comment"># 1.查询英语成绩不及格同学数据</span><br>nData = data[data[<span class="hljs-string">&quot;英语&quot;</span>] &lt; <span class="hljs-number">60</span>]<br><span class="hljs-built_in">print</span>(nData)<br><br><span class="hljs-comment"># 2.增加一列数据，计算每个同学4门课程成绩总分</span><br>data[<span class="hljs-string">&quot;总分&quot;</span>] = data[<span class="hljs-string">&quot;程序设计&quot;</span>] + data[<span class="hljs-string">&quot;体育&quot;</span>] + data[<span class="hljs-string">&quot;英语&quot;</span>] + data[<span class="hljs-string">&quot;高数&quot;</span>]<br><span class="hljs-built_in">print</span>(data)<br><br><span class="hljs-comment"># 3.将程序设计课不及格的同学成绩改为60分</span><br>data.loc[data[<span class="hljs-string">&quot;程序设计&quot;</span>] &lt; <span class="hljs-number">60</span>, <span class="hljs-string">&quot;程序设计&quot;</span>] = <span class="hljs-number">60</span><br><span class="hljs-built_in">print</span>(data)<br><br><span class="hljs-comment"># 4.采用基本统计函数计算并输出每门课程的平均分</span><br><span class="hljs-built_in">print</span>(data.loc[:, data.columns != <span class="hljs-string">&quot;学号&quot;</span>].mean())<br><br><span class="hljs-comment"># 5.按总分从高到低排序，若总分相同，则按英语从高到低排序</span><br>data.sort_values(by=[<span class="hljs-string">&quot;总分&quot;</span>, <span class="hljs-string">&quot;英语&quot;</span>], ascending=[<span class="hljs-literal">False</span>, <span class="hljs-literal">False</span>], inplace=<span class="hljs-literal">True</span>)<br><span class="hljs-built_in">print</span>(data)<br><br><span class="hljs-comment"># 6.查程序设计成绩为优秀，同时高数也为优秀的学生数据</span><br>nData = data[(data[<span class="hljs-string">&quot;程序设计&quot;</span>] &gt;= <span class="hljs-number">90</span>) &amp; (data[<span class="hljs-string">&quot;高数&quot;</span>] &gt;= <span class="hljs-number">90</span>)]<br><span class="hljs-built_in">print</span>(nData)<br><br><span class="hljs-comment"># 7.将程序设计成绩离散化处理，分成标签 不及格、及格、中、良、优秀，并增加一新列为程序设计分级</span><br>data[<span class="hljs-string">&quot;程序设计分级&quot;</span>] = pd.cut(<br>    data[<span class="hljs-string">&quot;程序设计&quot;</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">59</span>, <span class="hljs-number">70</span>, <span class="hljs-number">80</span>, <span class="hljs-number">90</span>, <span class="hljs-number">100</span>], labels=[<span class="hljs-string">&quot;不及格&quot;</span>, <span class="hljs-string">&quot;及格&quot;</span>, <span class="hljs-string">&quot;中&quot;</span>, <span class="hljs-string">&quot;良&quot;</span>, <span class="hljs-string">&quot;优秀&quot;</span>]<br>)<br><span class="hljs-built_in">print</span>(data)<br><br><span class="hljs-comment"># 8.在第（7）操作基础上，统计程序设计课 各分级人数</span><br><span class="hljs-built_in">print</span>(data[<span class="hljs-string">&quot;程序设计分级&quot;</span>].value_counts())<br><br><span class="hljs-comment"># 9.查英语成绩为良的学生学号、姓名、英语和高数几列数据</span><br>nData = data[(data[<span class="hljs-string">&quot;英语&quot;</span>] &gt;= <span class="hljs-number">80</span>)]<br><span class="hljs-built_in">print</span>(nData[[<span class="hljs-string">&quot;学号&quot;</span>, <span class="hljs-string">&quot;姓名&quot;</span>, <span class="hljs-string">&quot;英语&quot;</span>, <span class="hljs-string">&quot;高数&quot;</span>]])<br><br><span class="hljs-comment"># 10.查姓名里包含大写字母S的学生数据。</span><br>nData = data[data[<span class="hljs-string">&quot;姓名&quot;</span>].<span class="hljs-built_in">str</span>.contains(<span class="hljs-string">&quot;S&quot;</span>)]<br><span class="hljs-built_in">print</span>(nData)<br></code></pre></td></tr></table></figure></div><div class="post-tags"><a href="/tags/Python/">Python</a></div></div></article><div class="post-pagination"><div class="prev-page"><a href="/posts/6f92f412" title="页面增加dark/light模式">页面增加dark/light模式</a></div><div class="next-page"><a href="/posts/a640ea13" title="青蛙先生去看心理医生 ">青蛙先生去看心理医生</a></div></div></div><svg t="1673947892053" class="top" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9313" width="45" height="45"><path d="M535.12 442.432v210.016a16 16 0 0 1-16 16h-16.16a16 16 0 0 1-16-16V440.208l-32.88 32.864a16 16 0 0 1-11.312 4.688h-28.304a14.464 14.464 0 0 1-10.24-24.688l97.824-97.808a11.136 11.136 0 0 1 15.744 0l97.808 97.808a14.464 14.464 0 0 1-10.24 24.688h-28.288a16 16 0 0 1-11.312-4.688l-30.64-30.64zM512 800c159.056 0 288-128.944 288-288s-128.944-288-288-288-288 128.944-288 288 128.944 288 288 288z m0 48c-185.568 0-336-150.432-336-336s150.432-336 336-336 336 150.432 336 336-150.432 336-336 336z" p-id="9314"></path></svg><div class="tip disappear"><p>检测到页面内容有更新，是否刷新页面 <span class="positive-btn">是</span><span class="negative-btn">否</span></p></div></main><script src="/scripts/script.js" async></script><script async type="module">import{Fancybox}from"/scripts/fancybox.esm.js";Fancybox.bind('[data-fancybox="gallery"]',{Toolbar:{display:["fullscreen","download","close"]}})</script></body></html>